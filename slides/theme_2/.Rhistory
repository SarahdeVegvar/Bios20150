source('~/.active-rstudio-document', echo=TRUE)
setwd("~/github/Bios20150/slides/theme_1")
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/github/Bios20150/scratch/BuildDaiData.R')
setwd("~/github/Bios20150/scratch")
source('~/github/Bios20150/scratch/BuildDaiData.R')
source('~/github/Bios20150/scratch/BuildDaiData.R')
a
source('~/github/Bios20150/scratch/BuildDaiData.R')
a
source('~/github/Bios20150/scratch/BuildDaiData.R')
head(all_data)
library(dplyr)
library(tidyr)
head(all_data)
all_data %>% spread(1:11, initial_condition)
all_data %>% gather(1:11, initial_condition)
all_data %>% gather(1:11)
all_data %>% gather(,1:11)
all_data %>% gather(densitiy, 1:11)
all_data %>% gather(densitiy, 1)
all_data %>% gather(.[[1]], density)
all_data %>% gather(density, .[[1]])
head(all_data)
source('~/github/Bios20150/scratch/BuildDaiData.R')
all_data %>% gather(dens_1, dens_2)
all_data %>% gather(dens_1, dens_2) %>% head
all_data %>% gather(1:11) %>% head
all_data %>% gather(dens_1, dens_2, dens_3, dens_4) %>% head
all_data %>% gather(1:11, density, value) %>% head
all_data %>% gather(density, value, 1:11) %>% head
all_data %>% gather(initial_density, value, 1:11) %>% head
all_data <- all_data %>% gather(initial_density, value, 1:11)
ggplot(all_data, aes(x = day, y = value)) + geom_point()
library(ggplot2)
ggplot(all_data, aes(x = day, y = value)) + geom_point()
ggplot(all_data, aes(x = day, y = value)) + geom_point() + facet_wrap(~dilution)
ggplot(all_data, aes(x = day, y = value, colour = initial_density)) + geom_point() + facet_wrap(~dilution)
ggplot(all_data, aes(x = day, y = value, colour = initial_density)) + geom_smooth + facet_wrap(~dilution)
ggplot(all_data, aes(x = day, y = value, colour = initial_density)) + geom_smooth() + facet_wrap(~dilution)
ggplot(all_data, aes(x = day, y = value, colour = paste(initial_density, replicate))) + geom_smooth() + facet_wrap(~dilution)
ggplot(all_data, aes(x = day, y = value, colour = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution)
ggplot(all_data, aes(x = day, y = value, colour = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_log10()
ggplot(all_data, aes(x = day, y = value, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_log10()
ggplot(all_data, aes(x = day, y = value, colour=replicate, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_log10()
ggplot(all_data, aes(x = day, y = value, colour=initial_density, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_log10()
ggplot(all_data, aes(x = day, y = value, colour=initial_density, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution)
ggplot(all_data, aes(x = day, y = value, colour=initial_density, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt()
head(all_data)
write.table(all_data, "DaiEtAl_Science2012_data.csv", row.names = FALSE, col.names = TRUE)
all_data %>% filter(day == 8)
all_data %>% filter(day == 7)
hist(all_data %>% filter(day == 7) %>% select(value))
hist((all_data %>% filter(day == 7) %>% select(value))[,1])
hist(log10((all_data %>% filter(day == 7) %>% select(value))[,1]))
(all_data %>% filter(day == 7, value < 0.01)
)
all_data %>% filter(day == 7) %>% mutate(extinction = value < 0.01)
all_data %>% filter(day == 7) %>% mutate(extinction = value < 0.01) %>% select(replicate, dilution, extinction)
check_extinction <- all_data %>% filter(day == 7) %>% mutate(extinction = value < 0.01) %>% select(replicate, dilution, extinction)
inner_join(all_data, check_extinction)
all_data <- inner_join(all_data, check_extinction)
source('~/github/Bios20150/scratch/BuildDaiData.R')
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt()
source('~/github/Bios20150/scratch/BuildDaiData.R')
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt()
source('~/github/Bios20150/scratch/BuildDaiData.R')
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt()
source('~/github/Bios20150/scratch/BuildDaiData.R')
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt()
source('~/github/Bios20150/scratch/BuildDaiData.R')
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt()
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c(red, blue))
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("red", "blue"))
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("blue", "red"))
source('~/github/Bios20150/scratch/BuildDaiData.R')
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("blue", "red"))
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_log10() + scale_color_manual(values = c("blue", "red"))
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("blue", "red"))
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("blue", "#b30000"))
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("#045a8d", "#b30000"))
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("#045a8d", "#b30000")) + theme_bw()
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("#045a8d", "#b30000")) + theme_bw() + theme(legend.position == "none")
ggplot(all_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("#045a8d", "#b30000")) + theme_bw() + theme(legend.position = "none")
library(dplyr)
library(ggplot2)
library(tidyr)
dai_data <- read.csv("../../data/theme_2/DaiEtAl_Science2012_data.csv")
setwd("~/")
setwd("~/github/Bios20150/slides/theme_2")
dai_data <- read.csv("../../data/theme_2/DaiEtAl_Science2012_data.csv")
pl <- ggplot(dai_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("#045a8d", "#b30000")) + theme_bw() + theme(legend.position = "none")
show(pl)
pl <- ggplot(dai_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + scale_y_sqrt() + scale_color_manual(values = c("#045a8d", "#b30000")) + theme_bw() + theme(legend.position = "none")
pl
head(dai_data)
dai_data <- read.csv("../../data/theme_2/DaiEtAl_Science2012_data.csv", sep = " ")
pl <- ggplot(dai_data, aes(x = day, y = value, colour=extinction, group = paste(initial_density, replicate))) + geom_line() + facet_wrap(~dilution) + scale_y_sqrt() + scale_color_manual(values = c("#045a8d", "#b30000")) + theme_bw() + theme(legend.position = "none")
show(pl)
```
head(dai_data)
dai_data %>% filter(dilution == 250, replicate == "rep_1", initial_density == "dens_1")
dai_data %>% filter(dilution == 250, replicate == "rep_1", initial_density == "dens_1") %>% gather(day, value)
dai_data %>% filter(dilution == 250, replicate == "rep_1", initial_density == "dens_1") %>% spread(day, value)
dai_data %>% filter(dilution == 250, replicate == "rep_1", initial_density == "dens_1") %>% spread(day, value)
dai_data %>% filter(dilution == 250, replicate == "rep_1", initial_density == "dens_1")
tmp <- dai_data %>% filter(dilution == 250, replicate == "rep_1", initial_density == "dens_1")
data_growth <- data.frame()
get_x_y_growth <- function(df){
for (i in 1:6){
x <- df[df$day == i, "value"]
y <- df[df$day == (i + 1), "value"] / df[df$day == (i), "value"]
data_growth <- rbind(data_growth, data.frame(dilution = df$dilution[1], x = x, y = y))
}
}
get_x_y_growth(tmp)
data_growth
data_growth <- data.frame()
get_x_y_growth <- function(df){
for (i in 1:6){
x <- df[df$day == i, "value"]
y <- df[df$day == (i + 1), "value"] / df[df$day == (i), "value"]
data_growth <<- rbind(data_growth, data.frame(dilution = df$dilution[1], x = x, y = y))
}
}
data_growth
get_x_y_growth(tmp)
data_growth
data_growth <- data.frame()
get_x_y_growth <- function(df){
for (i in 1:6){
x <- df[df$day == i, "value"]
y <- df[df$day == (i + 1), "value"] / df[df$day == (i), "value"]
data_growth <<- rbind(data_growth, data.frame(dilution = df$dilution[1], x = x, y = y))
}
return("success")
}
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% summarise(aa = get_x_y_growth())
n
tmp <- dai_data %>% group_by(dilution, replicate, initial_density)
tmp
get_x_y_growth(tmp)
data_growth
data_growth <- data.frame()
get_x_y_growth <- function(v, dilution){
for (i in 1:6){
x <- v[i]
y <- v[i+1] / v[i]
data_growth <<- rbind(data_growth, data.frame(dilution = dilution[1], x = x, y = y))
}
return("success")
}
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% summarise(aa = get_x_y_growth(value, dilution))
data_growth
head(data_growth)
head(data_growth, 50)
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution)
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_y_log10()
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_y_sqrt()
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution)
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10()
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10()
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.01, 10))
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 10))
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.2, 10))
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.2, 10)) + geom_smooth()
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_y_log10() + coord_cartesian(ylim = c(0.2, 10)) + geom_smooth()
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_y_log10() + coord_cartesian(ylim = c(0.2, 10)) + geom_smooth() + xlim(c(0.01,2))
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_y_log10() + coord_cartesian(ylim = c(0.2, 10)) + geom_smooth() + xlim(c(0.05,2))
?lag
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% mutate(y = value / lag(value))
tmp
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% mutate(y = value / lead(value))
tmp
head(tmp, 100)
head(as.data.frame(tmp), 100)
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% arrange(dilution, replicate, day) %>% mutate(y = value / lead(value))
head(as.data.frame(tmp), 100)
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% arrange(dilution, replicate, day) %>% mutate(y = value / lag(value))
head(as.data.frame(tmp), 100)
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% arrange(dilution, replicate, day) %>% mutate(y =  lag(value) / value)
head(as.data.frame(tmp), 100)
tmp <- dai_data %>% group_by(dilution, replicate, initial_density) %>% arrange(dilution, replicate, day) %>% mutate(y =  lead(value) / value)
head(as.data.frame(tmp), 100)
data_growth <- dai_data %>% group_by(dilution, replicate, initial_density) %>% arrange(dilution, replicate, day) %>% mutate(y =  lead(value) / value)
ggplot(data = data_growth, aes(x = x, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 10))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 10))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 10), xlim = c(0.001, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 10), xlim = c(0.01, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 10), xlim = c(0.005, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 10), xlim = c(0.0075, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 15), xlim = c(0.0075, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 15), xlim = c(0.008, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 15), xlim = c(0.09, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 15), xlim = c(0.08, 2))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 15), xlim = c(0.01, 2))
data_growth
data_growth %>% filter(dilution == 250)
as.data.frame(data_growth %>% filter(dilution == 250))
ggplot(data = data_growth, aes(x = value, y = y)) + geom_point() + geom_smooth() + facet_wrap(~dilution) + scale_x_log10() + scale_y_log10() + coord_cartesian(ylim = c(0.1, 15), xlim = c(0.01, 2))
pl_growth <- gplot(data = data_growth,
aes(x = value, y = y, colour = x > 1)) +
geom_point() + geom_smooth() +
facet_wrap(~dilution) +
scale_x_log10() +
scale_y_log10() +
coord_cartesian(ylim = c(0.1, 15), xlim = c(0.01, 2))
pl_growth <- ggplot(data = data_growth,
aes(x = value, y = y, colour = x > 1)) +
geom_point() + geom_smooth() +
facet_wrap(~dilution) +
scale_x_log10() +
scale_y_log10() +
coord_cartesian(ylim = c(0.1, 15), xlim = c(0.01, 2))
show(pl_growth)
pl_growth <- ggplot(data = data_growth,
aes(x = value, y = y, colour = y > 1)) +
geom_point() + geom_smooth() +
facet_wrap(~dilution) +
scale_x_log10() +
scale_y_log10() +
coord_cartesian(ylim = c(0.1, 15), xlim = c(0.01, 2))
show(pl_growth)
pl_growth <- ggplot(data = data_growth,
aes(x = value, y = y, colour = y > 1)) +
geom_point() +
facet_wrap(~dilution) +
scale_x_log10() +
scale_y_log10() +
coord_cartesian(ylim = c(0.1, 15), xlim = c(0.01, 2)) +
scale_color_manual(values = c("#045a8d", "#b30000")) +
theme_bw() + theme(legend.position = "none")
show(pl_growth)
dai_data <- read.csv("../../data/theme_2/DaiEtAl_Science2012_data.csv", sep = " ")
data_growth <- dai_data %>% group_by(dilution, replicate, initial_density) %>% arrange(dilution, replicate, day) %>% mutate(y =  lead(value) / value) %>% ungroup()
pl_growth <- ggplot(data = data_growth %>% filter(dilution == 250 | dilution == 750 | dilution == 1266 | dilution == 1400),
aes(x = value, y = y, colour = y > 1)) +
geom_point() +
facet_wrap(~dilution) +
scale_x_log10() +
scale_y_log10() +
coord_cartesian(ylim = c(0.1, 15), xlim = c(0.01, 2)) +
scale_color_manual(values = c( "#b30000", "#045a8d")) +
theme_bw() + theme(legend.position = "none")
show(pl_growth)
